<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Golf Practice â€” Diagnostic</title>
<style>
  body { font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial; margin:0; background:#f7f8fa; color:#0f1220; }
  header { background:#0f1220; color:#fff; padding:12px 16px; }
  main { max-width: 680px; margin: 0 auto; padding: 16px; }
  .btn { padding: 12px 14px; border-radius:10px; border:0; font-weight:800; font-size:16px; margin:6px 4px; }
  .primary { background:#2b6df2; color:#fff; }
  .flat { background:#eceff5; }
  .card { background:#fff; border-radius:12px; padding:14px; box-shadow:0 2px 10px rgba(0,0,0,0.05); margin-bottom:12px; }
  .timer { font-variant-numeric: tabular-nums; font-weight:900; font-size:40px; margin-top:6px; }
  .bar { height:10px; background:#e7ebf3; border-radius:999px; overflow:hidden; margin-top:8px; }
  .bar span { display:block; height:100%; width:0%; background:#2b6df2; }
  ul { margin:8px 0 0 20px; }
  pre { background:#f1f3f8; padding:8px; border-radius:8px; overflow:auto; }
</style>
</head>
<body>
<header>
  <strong>Golf Practice â€” Diagnostic Build</strong>
</header>
<main>
  <div class="card">
    <button class="btn primary" id="generateBtn">Generate Drills</button>
    <button class="btn flat" id="startBtn">Start</button>
    <button class="btn flat" id="pauseBtn">Pause</button>
    <button class="btn flat" id="skipBtn">Skip</button>
    <div id="status" style="display:inline-block; margin-left:8px;">Status: Ready</div>
  </div>

  <div class="card">
    <strong>Drills (should appear here):</strong>
    <div id="drills" style="padding-top:6px;"></div>
  </div>

  <div class="card">
    <strong>Timer</strong>
    <div class="timer" id="timer">00:00</div>
    <div class="bar"><span id="bar"></span></div>
  </div>

  <div class="card">
    <strong>Debug Log</strong>
    <pre id="log"></pre>
  </div>
</main>

<script>
// Ultra-basic JS + alerts to verify taps & rendering

function $(id){ return document.getElementById(id); }
function log(msg){ var el=$("log"); el.textContent += msg + "\n"; }
function setStatus(msg){ $("status").textContent = "Status: " + msg; log(msg); }

var session = { drills: [], i:0, remaining:0, running:false, handle:null };

function printDrills(){
  var html = "<ul>";
  for (var k=0; k<session.drills.length; k++){
    var d = session.drills[k];
    html += "<li><strong>"+d.cat+":</strong> "+d.name+" ("+(d.secs/60)+" min)</li>";
  }
  html += "</ul>";
  $("drills").innerHTML = html;
}

function generate(){
  alert("Generate tapped"); // confirm tap fired
  setStatus("Generating drillsâ€¦");
  session.drills = [
    {cat:"Range", name:"Warm-Up Ladder", secs: 60},
    {cat:"Short Game", name:"Landing Towel", secs: 60},
    {cat:"Putting", name:"Gate Start-Line", secs: 60}
  ];
  session.i = 0;
  session.remaining = session.drills[0].secs;
  printDrills();
  updateTimer();
  setStatus("Drills generated ("+session.drills.length+")");
}

function fmt(s){ if (s<0) s=0; var m=(s/60)|0, ss=s%60; return String(m).padStart(2,"0")+":"+String(ss).padStart(2,"0"); }
function updateTimer(){
  $("timer").textContent = fmt(session.remaining);
  var total = 0; for (var t=0;t<session.drills.length;t++) total += session.drills[t].secs;
  var elapsed = 0; for (var j=0;j<session.i;j++) elapsed += session.drills[j].secs;
  var currentElapsed = session.drills[session.i] ? (session.drills[session.i].secs - session.remaining) : 0;
  var pct = total ? (100*(elapsed+currentElapsed)/total) : 0;
  $("bar").style.width = pct + "%";
}

function start(){
  alert("Start tapped"); // confirm tap fired
  if (!session.drills.length){ generate(); }
  if (session.running){ return; }
  session.running = true;
  clearInterval(session.handle);
  setStatus("Running â€” " + session.drills[session.i].name);
  session.handle = setInterval(function(){
    session.remaining--;
    if (session.remaining <= 0){
      session.i++;
      if (session.i >= session.drills.length){
        clearInterval(session.handle);
        session.running = false;
        setStatus("Session complete ðŸŽ‰");
        $("timer").textContent = "00:00";
        $("bar").style.width = "100%";
        return;
      }
      session.remaining = session.drills[session.i].secs;
      setStatus("Next â†’ " + session.drills[session.i].name);
    }
    updateTimer();
  }, 1000);
}

function pause(){ alert("Pause tapped"); if (!session.running) return; clearInterval(session.handle); session.running=false; setStatus("Paused"); }
function skip(){ alert("Skip tapped"); session.i++; if (session.i>=session.drills.length){ setStatus("Done"); return; } session.remaining=session.drills[session.i].secs; updateTimer(); setStatus("Skipped â†’ " + session.drills[session.i].name); }

// Bind both click and touchstart for iOS
function bind(id, fn){
  var el = $(id);
  el.addEventListener("click", function(e){ e.preventDefault(); fn(); }, {passive:false});
  el.addEventListener("touchstart", function(e){ e.preventDefault(); fn(); }, {passive:false});
}
bind("generateBtn", generate);
bind("startBtn", start);
bind("pauseBtn", pause);
bind("skipBtn", skip);

// Pre-fill drills (so the area never looks empty)
setStatus("Page loaded");
</script>
</body>
</html>
